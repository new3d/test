jQuery(document).ready(function(){function $(e){var t=document.getElementById(e);if(t.getBoundingClientRect){return K(t)}else{return J(t)}}function J(e){var t=0,n=0;while(e){t=t+parseInt(e.offsetTop);n=n+parseInt(e.offsetLeft);e=e.offsetParent}return{top:t,left:n}}function K(e){var t=e.getBoundingClientRect();var n=document.body;var r=document.documentElement;var i=window.pageYOffset||r.scrollTop||n.scrollTop;var s=window.pageXOffset||r.scrollLeft||n.scrollLeft;var o=r.clientTop||n.clientTop||0;var u=r.clientLeft||n.clientLeft||0;var a=t.top+i-o;var f=t.left+s-u;return{top:Math.round(a),left:Math.round(f)}}function Q(e,t){if(e)C[t]=true;else C[t]=false}function G(e,t){Q(true,e);var n=jQuery("<div id='pageF"+t+"'><div id='galleryF"+t+"'><div id='panelF"+t+"'><img id='myImageF"+t+"' src='"+jQuery("#myImage"+t).attr("src")+"'/></div></div><div id='reelControlsPanelF"+t+"' class='reelControlsPanelFCl'><img id='leftBtnF"+t+"' src='"+c+"' alt='Left'><img id='stopButtonF"+t+"' src='"+jQuery("#stopButton"+t).attr("src")+"' alt='Stop'><img id='zoomRotateToggleButtonF"+t+"' src='"+a+"' alt='Zoom'><img id='playButtonF"+t+"' src='"+jQuery("#playButton"+t).attr("src")+"' alt='Play'><img id='rightBtnF"+t+"' src='"+h+"' alt='Right'></div></div>");var r=true;var i=true;var s=L[e];var o=A[e]+jQuery("#reelControlsPanel"+t).height();var u=navigator.userAgent.toLowerCase();if(/msie/.test(u)&&parseFloat((u.match(/.*(?:rv|ie)[\/: ](.+?)([ \);]|$)/)||[])[1])<9){r=false;i=false;s+=20;o+=30}for(j=1;j<=U;j++){jQuery("#myImage-"+j).trigger("play");jQuery("#myImage-"+j).trigger("stop")}jQuery.fancybox({content:n,modal:false,autoScale:r,autoDimensions:i,width:s,height:o,onClosed:function(){Q(false,e);m[e]=true;ft(e,t)}});lt(e,t);m[e]=true;ft(e,t)}function Y(e,t){if(r||C[e]||!z)return;if(jQuery("#go_full_screen"+t).length==0){jQuery("body").append("<img id='go_full_screen"+t+"' class='go_full_screenCl' src='"+l+"'/>");jQuery("#go_full_screen"+t).click(function(){et(e,t);G(e,t)})}if(jQuery("#page"+t).css("position")=="absolute"){var n=parseInt(jQuery("#page"+t).css("left").replace("px",""));var i=parseInt(jQuery("#page"+t).css("top").replace("px",""));jQuery("#go_full_screen"+t).css("left",n+O[e]-32-3);jQuery("#go_full_screen"+t).css("top",i+5)}else{var s=$("myImage"+t).left;var o=$("myImage"+t).top;jQuery("#go_full_screen"+t).css("left",s+O[e]-32-2);jQuery("#go_full_screen"+t).css("top",o+2)}jQuery("#go_full_screen"+t).css("position","absolute");jQuery("#go_full_screen"+t).show()}function Z(e,t){var n=jQuery(C[e]?"#myImageF"+t:"#myImage"+t).attr("src");var r=n.replace("img","img_zoom");et(e,t);jQuery(C[e]?"#zoomRotateToggleButtonF"+t:"#zoomRotateToggleButton"+t).attr("src",f);b[e]="reel";jQuery(C[e]?"#myImageF"+t:"#myImage"+t).attr("src",n);if(w[e])jQuery(C[e]?"#myImageF"+t:"#myImage"+t).attr("src-big",r);at(e,t)}function et(e,t){if(g[e])tt(e,t);if(y[e])nt(e,t)}function tt(e,t){jQuery(C[e]?"#myImageF"+t:"#myImage"+t).axzoomer("destroy");jQuery(C[e]?"#myImageF"+t:"#myImage"+t).css({position:"relative",top:"0",left:"0"});g[e]=false}function nt(e,t){jQuery(C[e]?"#myImageF"+t:"#myImage"+t).unreel();y[e]=false}function rt(e,t){et(e,t);jQuery(C[e]?"#zoomRotateToggleButtonF"+t:"#zoomRotateToggleButton"+t).attr("src",a);b[e]="zoom";if(!m[e]||k[e])ft(e,t)}function it(e,t,n){var r="";if(C[e])r="F";jQuery("#leftBtn"+r+t).css("visibility",n);jQuery("#rightBtn"+r+t).css("visibility",n);jQuery("#stopButton"+r+t).css("visibility",n);jQuery("#playButton"+r+t).css("visibility",n)}function st(e,t){if(b[e]=="zoom"){it(e,t,"hidden");if(jQuery("#go_full_screen"+t).length>0&&!C[e])jQuery("#go_full_screen"+t).css("visibility","hidden");Z(e,t)}else if(b[e]=="reel"){it(e,t,"visible");if(jQuery("#go_full_screen"+t).length>0&&!C[e])jQuery("#go_full_screen"+t).css("visibility","visible");rt(e,t)}}function ot(e,t){jQuery(document).on("click","#zoomRotateToggleButton"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}st(t,n)});jQuery(document).on("click","#zoomRotateToggleButtonF"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}st(t,n)})}function ut(e,t){jQuery(document).on("mousedown","#leftBtn"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}S[t]=setInterval(function(){jQuery("#myImage"+n).trigger("stepRight")},v)});jQuery(document).on("mouseup","#leftBtn"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}clearInterval(S[t])});jQuery(document).on("mousedown","#leftBtnF"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}x[t]=setInterval(function(){jQuery("#myImageF"+n).trigger("stepRight")},v)});jQuery(document).on("mouseup","#leftBtnF"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}clearInterval(x[t])});jQuery(document).on("mousedown","#rightBtn"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}T[t]=setInterval(function(){jQuery("#myImage"+n).trigger("stepLeft")},v)});jQuery(document).on("mouseup","#rightBtn"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}clearInterval(T[t])});jQuery(document).on("mousedown","#rightBtnF"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}N[t]=setInterval(function(){jQuery("#myImageF"+n).trigger("stepLeft")},v)});jQuery(document).on("mouseup","#rightBtnF"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}clearInterval(N[t])});jQuery(document).on("click","#leftBtn"+t,function(e){jQuery("#myImage"+t).trigger("stepRight")});jQuery(document).on("click","#leftBtnF"+t,function(e){jQuery("#myImageF"+t).trigger("stepRight")});jQuery(document).on("click","#rightBtn"+t,function(e){jQuery("#myImage"+t).trigger("stepLeft")});jQuery(document).on("click","#rightBtnF"+t,function(e){jQuery("#myImageF"+t).trigger("stepLeft")});jQuery(document).on("click","#stopButton"+t,function(e){jQuery("#myImage"+t).trigger("stop")});jQuery(document).on("click","#stopButtonF"+t,function(e){jQuery("#myImageF"+t).trigger("stop")});jQuery(document).on("click","#playButton"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}if(m[t]){ft(t,n);m[t]=false}else{for(j=1;j<=t;j++){jQuery("#myImage-"+j).trigger("play");jQuery("#myImage-"+j).trigger("stop")}jQuery("#myImage"+n).trigger("play");for(j=t+2;j<=U;j++){jQuery("#myImage-"+j).trigger("play");jQuery("#myImage-"+j).trigger("stop")}}});jQuery(document).on("click","#playButtonF"+t,function(e){var t=parseInt(this.id.replace(/.*(?=-\d+$)/g,"").replace("-",""))-1;if(!R||W)var n="-"+(t+1);else{var n="";t=0}if(m[t]){ft(t,n);m[t]=false}else{for(j=1;j<=t;j++){jQuery("#myImage-"+j+"F").trigger("play");jQuery("#myImage-"+j+"F").trigger("stop")}jQuery("#myImageF"+n).trigger("play");for(j=t+2;j<=U;j++){jQuery("#myImage-"+j+"F").trigger("play");jQuery("#myImage-"+j+"F").trigger("stop")}}})}function at(e,t){jQuery(C[e]?"#myImageF"+t:"#myImage"+t).axzoomer({maxZoom:E[e],showControls:true,zoomIn:o,zoomOut:u,opacity:.8,sensivity:12,resetImage:true});g[e]=true}function ft(e,n){jQuery(C[e]?"#myImageF"+n:"#myImage"+n).reel({frames:P[e],speed:.25,timeout:30,delay:0,preloader:4,attr:{width:(C[e]?L[e]:O[e])+"px",height:(C[e]?A[e]:M[e])+"px"},modelsCnt:e,suff:n,existModelsCnt:U,wheelable:false,images:H[e],cw:t,suffix:C[e]?"-reelF":"-reel",annotations:C[e]?"":B[e],cursor:"move",steppable:true,draggable:true,clickfree:false});if(k[e]&&m[e]){m[e]=false;y[e]=true}else y[e]=true;if(z&&!C[e])setTimeout(function(){Y(e,n)},1e3)}function lt(e,t){var n=244;var r=8;var i="";if(C[e])i="F";if(jQuery("#leftBtn"+i+t).length==0)jQuery("#reelControlsPanel"+i+t).prepend("<img id='leftBtn"+i+t+"' src='"+c+"' alt='Left'>");if(jQuery("#rightBtn"+i+t).length==0)jQuery("#reelControlsPanel"+i+t).append("<img id='rightBtn"+i+t+"' src='"+h+"' alt='Left'>");var s=n+2*r;if(O[e]<s&&!C[e]){var o=O[e]/s;var u=0;var a=0;a=Math.ceil(43*o);jQuery("#leftBtn"+i+t).css("width",a);u=u+a;jQuery("#leftBtn"+i+t).css("height",Math.ceil(29*o));a=Math.ceil(43*o);jQuery("#rightBtn"+i+t).css("width",a);u=u+a;jQuery("#rightBtn"+i+t).css("height",Math.ceil(29*o));a=Math.ceil(40*o);jQuery("#stopButton"+i+t).css("width",a);u=u+a;jQuery("#stopButton"+i+t).css("height",Math.ceil(29*o));a=Math.ceil(52*o);jQuery("#zoomRotateToggleButton"+i+t).css("width",a);u=u+a;jQuery("#zoomRotateToggleButton"+i+t).css("height",Math.ceil(29*o));a=Math.ceil(40*o);jQuery("#playButton"+i+t).css("width",a);u=u+a;jQuery("#playButton"+i+t).css("height",Math.ceil(29*o));u=Math.ceil(u+2*r*o);jQuery("#leftBtn"+i+t).css("margin-right",Math.ceil((jQuery("#myImage"+i+t).width()-u)/2));jQuery("#rightBtn"+i+t).css("margin-left",Math.ceil((jQuery("#myImage"+i+t).width()-u)/2));jQuery("#zoomRotateToggleButton"+i+t).css("margin-left",Math.ceil(r*o));jQuery("#zoomRotateToggleButton"+i+t).css("margin-right",Math.ceil(r*o))}else{s=s-10;jQuery("#leftBtn"+i+t).css("margin-right",Math.ceil((jQuery("#myImage"+i+t).width()-s)/2));jQuery("#rightBtn"+i+t).css("margin-left",Math.ceil((jQuery("#myImage"+i+t).width()-s)/2));jQuery("#zoomRotateToggleButton"+i+t).css("margin-left",r);jQuery("#zoomRotateToggleButton"+i+t).css("margin-right",r)}jQuery("#reelControlsPanel"+t).width(O[e]);jQuery("#reelControlsPanel"+t).css("overflow","visible")}function ct(t,r,i){function o(e,t,n,i){return'"'+t+r+'":'}F[t]="#myImage"+r;var s=jQuery(F[t]).attr("class").split("_");P[t]=34;if(s.length>0)if(s[0].indexOf("frames-")+1)P[t]=s[0].replace("frames-","");w[t]=false;E[t]=1.5;if(applyGlobalZoomToEveryModel){if(globalZoom){E[t]=globalZoomCoeff;w[t]=true}}else{if(s.length>1)if(s[1].replace("zoom-","")=="1"){E[t]=3;w[t]=true}}k[t]=false;if(applyGlobalAutoplayToEveryModel){if(globalAutoplay)k[t]=true}else{if(s.length>2)if(s[2].replace("autoplay-","")=="1")k[t]=true}L[t]=jQuery(F[t]).width();A[t]=jQuery(F[t]).height();if(applyGlobalSizeToEveryModel){jQuery(F[t]).width(globalWidth);jQuery(F[t]).height(globalHeight)}var u=jQuery.trim(jQuery("#hotspots"+r).text());if(u!=""){u=u.replace(/\"(n\d+)\":/g,o);var a=jQuery.parseJSON(u)}if(typeof a!="undefined"||typeof myAnnotations!="undefined"&&(e||n)){if(e||n)B[t]=myAnnotations;else B[t]=a;var f=[];for(var l in B[t]){B[t][l]["image"]={src:p,width:32,height:32};B[t][l]["link"]["id"]="showhotspot";B[t][l]["link"]["href"]=jQuery("#myImage"+r).attr("src").replace("img/001.jpg","hotspots/")+B[t][l]["link"]["href"]}}else B[t]="";C[t]=false;O[t]=parseInt(jQuery(F[t]).css("width").replace("px",""));M[t]=parseInt(jQuery(F[t]).css("height").replace("px",""));_[t]=O[t];D[t]=M[t];jQuery("body").append('<div id="firstWH'+r+'" width="'+L[t]+'" height="'+A[t]+'" style="display:none; width:'+L[t]+"px; height:"+A[t]+'px;"></div>');jQuery(F[t]).width(O[t]);jQuery(F[t]).height(M[t]);jQuery(F[t]).css("wigth",O[t]);jQuery(F[t]).css("height",M[t]);lt(t,r);jQuery("#panel"+r).width(O[t]);H[t]=jQuery(F[t]).attr("src").replace("001.jpg","###.jpg");ut(t,r);ot(t,r);if(location.href.indexOf("http://new3d.com.ua")==-1 && location.href.indexOf("http://new3d.net")==-1)jQuery("#panel"+r).append("<a id='new3d' style='top:"+(M[t]-(e?7:15))+"px;' title='New3D Studio' target='_blank' href='http://new3d.net'>&nbsp;&nbsp;New3D Studio</a>");m[t]=true;ft(t,r)}var e=true;var t=true;if((document.location+"").indexOf("file:///")!=0&&(document.location+"").indexOf("content://")!=0||document.location.hostname=="localhost"){e=false}var n=window!=window.parent;var r=false;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){r=true}var s=base3Dpath;if(typeof e!="undefined")if(e)s="../..";if(document.createStyleSheet){document.createStyleSheet(s+"/scripts/styles.css");document.createStyleSheet(s+"/scripts/jquery.fancybox-1.3.4.css")}else{jQuery("head").append(jQuery("<link rel='stylesheet' href='"+s+"/scripts/styles.css' type='text/css' media='screen' />"));jQuery("head").append(jQuery("<link rel='stylesheet' href='"+s+"/scripts/jquery.fancybox-1.3.4.css' type='text/css' media='screen' />"))}if(base3Dpath.charAt(0)!="/")base3Dpath="/"+base3Dpath;base3Dpath=location.protocol+"//"+location.host+base3Dpath;var o=base3Dpath+"/sysImages/zoom_in.png";var u=base3Dpath+"/sysImages/zoom_out.png";var a=base3Dpath+"/sysImages/zoom.png";var f=base3Dpath+"/sysImages/rotate.png";var l=base3Dpath+"/sysImages/full_screen.png";var c=base3Dpath+"/sysImages/left.png";var h=base3Dpath+"/sysImages/right.png";var p=base3Dpath+"/sysImages/plus.png";var d=base3Dpath+"/sysImages/jquery.reel.cur";if(typeof e!="undefined")if(e){o="../../sysImages/zoom_in.png";u="../../sysImages/zoom_out.png";a="../../sysImages/zoom.png";f="../../sysImages/rotate.png";l="../../sysImages/full_screen.png";c="../../sysImages/left.png";h="../../sysImages/right.png";p="../../sysImages/plus.png";d="../../sysImages/jquery.reel.cur"}var v=100;var m=[];var g=[];var y=[];var b=[];var w=[];var E=[];var S=[];var x=[];var T=[];var N=[];var C=[];var k=[];var L=[];var A=[];var O=[];var M=[];var _=[];var D=[];var P=[];var H=[];var B=[];var F=[];var I=screen.width;var q=screen.height;var R=false;var U=1;if(typeof existModelsCnt1!="undefined"){U=existModelsCnt1}var z=false;if(typeof myFullScreen1!="undefined")z=myFullScreen1;var W=false;if(typeof myStaticMode1!="undefined")W=myStaticMode1;if(typeof U!="undefined"){var X="";var V="";for(i=0;i<U;i++){if(!R||W)X="-"+(i+1);m[i]=true;g[i]=false;y[i]=false;b[i]="zoom";if(typeof W!="undefined"){if(W==true){jQuery("#hotspots"+X).empty();jQuery("#staticPic"+X).click(function(){var e=parseInt(this.id.replace("staticPic-",""))-1;jQuery.fancybox({content:model3D[e],modal:false,onComplete:function(){ct(e,"-"+(e+1),base3Dpath)}})})}else{ct(i,X,base3Dpath)}}else{ct(i,X,base3Dpath)}}}jQuery(function(){var e="";for(i=0;i<U;i++){if(!R||W)e="-"+(i+1);rt(i,e)}return false})})
